(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{115:function(t,e,n){},116:function(t,e,n){},149:function(t,e,n){"use strict";n.r(e);var c=n(0),a=n.n(c),i=n(11),r=n.n(i);n(115),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(116);var o,s,d,u=n(192),l=n(203),j=n(187),b=n(193),O=n(194),f=n(185),h=n(152),m=n(189),p=n(195),T=n(196),x=n(94),g=n.n(x),S=n(19),y=n(34),v=n(7),I=n(87),k=n.n(I).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"api-key":"17966628-b354-4868-a658-bbe1d663b656"}}),E=function(){return k.get("todo-lists")},_=function(t,e){return k.put("todo-lists/".concat(t),{title:e})},A=function(t){return k.post("todo-lists",{title:t})},C=function(t){return k.delete("todo-lists/".concat(t))},w=function(t){return k.get("todo-lists/".concat(t,"/tasks"))},L=function(t,e){return k.post("todo-lists/".concat(t,"/tasks"),{title:e})},D=function(t,e,n){return k.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},P=function(t,e){return k.delete("todo-lists/".concat(t,"/tasks/").concat(e))},N=function(t){return k.post("auth/login",t)},R=function(){return k.delete("auth/login")},K=function(){return k.get("auth/me")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(o||(o={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.High=2]="High",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={})),function(t){t[t.Succeed=0]="Succeed",t[t.Failed=1]="Failed"}(d||(d={}));var U=function(t,e){t.messages.length?e(q(t.messages[0])):e(q("Some error occurred")),e(W("failed"))},F=function(t,e){e(q(t.message)),e(W("failed"))},G=n(33),M={},H=function(t,e,n){return{type:"SET_TASK_ENTITY_STATUS",todolistId:t,taskId:e,status:n}},z=function(t,e,n){return function(c,a){c(W("loading")),c(H(t,e,"loading"));var i=a().tasks[t].find((function(t){return t.id===e}));i&&D(t,e,Object(v.a)({title:i.title,startDate:i.startDate,priority:i.priority,description:i.description,deadline:i.deadline,status:i.status},n)).then((function(a){a.data.resultCode===d.Succeed?(c(function(t,e,n){return{type:"UPDATE_TASK",todolistId:t,taskId:e,model:n}}(t,e,n)),c(W("succeeded")),c(H(t,e,"succeeded"))):(U(a.data,c),c(H(t,e,"failed")))})).catch((function(n){F(n,c),c(H(t,e,"failed"))}))}},Z={isLoggedIn:!1},B=function(t){return{type:"AUTH/SET_IS_LOGGED_IN",isLoggedIn:t}},V={isInitialized:!1,status:"idle",error:null},W=function(t){return{type:"APP/SET-STATUS",status:t}},q=function(t){return{type:"APP/SET-ERROR",error:t}},Y=function(t){return{type:"APP/SET-APP-IS-INITIALIZED",isInitialized:t}},$=[],J=function(t){return{type:"SET_TODOLISTS",todolists:t}},X=function(t,e){return{type:"SET_ENTITY_STATUS",id:t,status:e}},Q=n(180),tt=n(151),et=n(44),nt=n(197),ct=n(186),at=n(2),it=a.a.memo((function(t){var e=Object(c.useState)(""),n=Object(et.a)(e,2),a=n[0],i=n[1],r=Object(c.useState)(null),o=Object(et.a)(r,2),s=o[0],d=o[1],u=function(){a.trim()?(t.addItem(a),i("")):(d("Title is required!"),i(""))};return Object(at.jsx)(Q.a,{spacing:2,children:Object(at.jsxs)(Q.a,{container:!0,children:[Object(at.jsx)(nt.a,{disabled:t.disabled,margin:"dense",variant:"outlined",value:a,error:!!s,helperText:s,label:t.title,onChange:function(t){i(t.currentTarget.value),null!==s&&d(null)},onKeyPress:function(t){"Enter"===t.key&&u()}}),Object(at.jsx)(f.a,{color:"primary",onClick:u,disabled:t.disabled,children:Object(at.jsx)(ct.a,{})})]})})})),rt=n(198),ot=n(188),st=a.a.memo((function(t){var e=t.title,n=t.editTitle,a=t.status,i=t.disabled,r=t.entityStatus,s=Object(c.useState)(!1),d=Object(et.a)(s,2),u=d[0],l=d[1],b=Object(c.useState)(""),O=Object(et.a)(b,2),f=O[0],h=O[1],m=Object(c.useState)(null),p=Object(et.a)(m,2),T=p[0],x=p[1],g=function(t){t.trim()?(n(t),l(!1)):(x("Title is required!"),h(""))};return Object(at.jsx)(at.Fragment,{children:"loading"===r?Object(at.jsx)(j.a,{size:20}):u?Object(at.jsx)(nt.a,{autoFocus:!0,value:f,error:!!T,helperText:T,onChange:function(t){h(t.currentTarget.value),null!==T&&x(null)},onBlur:function(){g(f)},onKeyPress:function(t){"Enter"!==t.key||t.shiftKey||g(f)}}):Object(at.jsx)(rt.a,{component:"span",m:1,p:1,style:{textDecoration:"".concat(a===o.Completed?"line-through":""),wordBreak:"break-word"},onDoubleClick:function(){!i&&l(!0)},children:e})})})),dt=n(200),ut=a.a.memo((function(t){var e=t.title,n=t.id,a=t.status,i=t.entityTaskStatus,r=t.removeTask,s=t.changeTaskStatus,d=t.changeTaskTitle,u=Object(c.useCallback)((function(t){s(n,t.currentTarget.checked?o.Completed:o.New)}),[s,n]),l=Object(c.useCallback)((function(){r(n)}),[r,n]),j=Object(c.useCallback)((function(t){d(n,t)}),[d,n]);return Object(at.jsxs)(Q.a,{style:{minWidth:"200px",maxWidth:"300px",display:"flex",justifyContent:"space-between"},children:[Object(at.jsx)(dt.a,{color:"primary",onChange:u,checked:a!==o.New,disabled:"loading"===i}),Object(at.jsx)(st,{title:e,editTitle:j,status:a,entityStatus:i,disabled:"loading"===i}),Object(at.jsx)(f.a,{onClick:l,disabled:"loading"===i,children:Object(at.jsx)(ot.a,{})})]},t.key)})),lt=a.a.memo((function(t){var e=t.id,n=t.filter,a=t.title,i=t.entityStatus,r=t.changeTodolistTitle,s=t.deleteTodolist,u=t.demo,l=Object(S.c)((function(t){return t.tasks})),j=Object(S.b)();Object(c.useEffect)((function(){var t;u||j((t=e,function(e){e(W("loading")),w(t).then((function(n){n.data.error?(e(q(n.data.error)),e(W("failed"))):(e(function(t,e){return{type:"SET_TASKS",tasks:t,todolistId:e}}(n.data.items,t)),e(W("succeeded")))})).catch((function(t){return F(t,e)}))}))}),[j]);var b=Object(c.useCallback)((function(t){j(function(t,e){return function(n){n(W("loading")),n(H(t,e,"loading")),P(t,e).then((function(c){c.data.resultCode===d.Succeed?(n(function(t,e){return{type:"REMOVE_TASK",taskId:t,todolistId:e}}(e,t)),n(W("succeeded")),n(H(t,e,"succeeded"))):U(c.data,n)})).catch((function(c){F(c,n),n(H(t,e,"failed"))}))}}(e,t))}),[j,e]),O=Object(c.useCallback)((function(t){j(function(t,e){return function(n){n(W("loading")),n(X(t,"loading")),L(t,e).then((function(e){e.data.resultCode===d.Succeed?(n({type:"ADD_TASK",task:e.data.data.item}),n(W("succeeded")),n(X(t,"succeeded"))):(U(e.data,n),n(X(t,"failed")))})).catch((function(e){F(e,n),n(X(t,"failed"))}))}}(e,t))}),[j,e]),h=Object(c.useCallback)((function(t,n){var c=z(e,t,{status:n});j(c)}),[j,e]),p=Object(c.useCallback)((function(t,n){var c=z(e,t,{title:n});j(c)}),[j,e]),T=function(t){var n=function(t,e){return{type:"CHANGE_TODOLIST_FILTER",filter:e,id:t}}(e,t);j(n)},x=Object(c.useCallback)((function(t){r(e,t)}),[r,e]),g=l[e],y=g;switch(n){case"active":y=g.filter((function(t){return t.status===o.New}));break;case"completed":y=g.filter((function(t){return t.status===o.Completed}))}return Object(at.jsxs)(rt.a,{style:{textAlign:"center"},children:[Object(at.jsxs)("h3",{style:{maxWidth:"300px",textAlign:"center"},children:[Object(at.jsx)(st,{title:a,editTitle:x,disabled:"loading"===i,entityStatus:i}),Object(at.jsx)(f.a,{onClick:function(){s(e)},disabled:"loading"===i,children:Object(at.jsx)(ot.a,{})})]}),Object(at.jsxs)(Q.a,{children:[Object(at.jsx)(m.a,{variant:"all"===n?"contained":"outlined",color:"primary",style:{margin:"5px"},onClick:function(){return T("all")},children:"all"}),Object(at.jsx)(m.a,{variant:"active"===n?"contained":"outlined",color:"primary",style:{margin:"5px"},onClick:function(){return T("active")},children:"active"}),Object(at.jsx)(m.a,{variant:"completed"===n?"contained":"outlined",color:"primary",style:{margin:"5px"},onClick:function(){return T("completed")},children:"completed"})]}),Object(at.jsx)(rt.a,{style:{display:"flex",justifyContent:"center"},children:Object(at.jsx)(it,{title:"Create new task",addItem:O,disabled:"loading"===i})}),Object(at.jsx)(rt.a,{children:y.map((function(t){return Object(at.jsx)(ut,{id:t.id,title:t.title,status:t.status,entityTaskStatus:t.entityTaskStatus,removeTask:b,changeTaskStatus:h,changeTaskTitle:p},t.id)}))})]})})),jt=n(16),bt=function(t){var e=t.demo,n=void 0!==e&&e,a=Object(S.c)((function(t){return t.todolists})),i=Object(S.c)((function(t){return t.auth.isLoggedIn})),r=Object(S.b)();Object(c.useEffect)((function(){!n&&i&&r((function(t){t(W("loading")),E().then((function(e){t(J(e.data)),t(W("succeeded"))})).catch((function(e){F(e,t)}))}))}),[r,i,n]);var o=Object(c.useCallback)((function(t){r(function(t){return function(e){e(W("loading")),A(t).then((function(t){console.log(t),t.data.resultCode===d.Succeed?(e({type:"ADD_TODOLIST",todolist:t.data.data.item}),e(W("succeeded"))):U(t.data,e)})).catch((function(t){return F(t,e)}))}}(t))}),[r]),s=Object(c.useCallback)((function(t){r(function(t){return function(e){e(W("loading")),e(X(t,"loading")),C(t).then((function(n){n.data.resultCode===d.Succeed?(e(function(t){return{type:"REMOVE_TODOLIST",id:t}}(t)),e(W("succeeded"))):(U(n.data,e),e(X(t,"failed")))})).catch((function(n){F(n,e),e(X(t,"failed"))}))}}(t))}),[r]),u=Object(c.useCallback)((function(t,e){r(function(t,e){return function(n){n(W("loading")),n(X(t,"loading")),_(t,e).then((function(c){c.data.resultCode===d.Succeed?(n(function(t,e){return{type:"CHANGE_TODOLIST_TITLE",title:e,id:t}}(t,e)),n(W("succeeded")),n(X(t,"succeeded"))):(U(c.data,n),n(X(t,"failed")))})).catch((function(e){F(e,n),n(X(t,"failed"))}))}}(t,e))}),[r]);return i?Object(at.jsxs)(at.Fragment,{children:[Object(at.jsx)(Q.a,{container:!0,style:{padding:"20px"},children:Object(at.jsx)(it,{title:"Create new todolist",addItem:o})}),Object(at.jsx)(Q.a,{container:!0,spacing:3,children:a.map((function(t){return Object(at.jsx)(Q.a,{item:!0,children:Object(at.jsx)(tt.a,{style:{padding:"10px",minWidth:"300px"},children:Object(at.jsx)(lt,{demo:n,id:t.id,title:t.title,filter:t.filter,entityStatus:t.entityStatus,deleteTodolist:s,changeTodolistTitle:u},t.id)})})}))})]}):Object(at.jsx)(jt.a,{to:"login"})},Ot=n(202),ft=n(199);function ht(t){return Object(at.jsx)(ft.a,Object(v.a)({elevation:6,variant:"filled"},t))}function mt(){var t=Object(S.c)((function(t){return t.app.error})),e=Object(S.b)(),n=function(t,n){"clickaway"!==n&&e(q(null))};return Object(at.jsx)(Ot.a,{open:null!==t,autoHideDuration:6e3,onClose:n,children:Object(at.jsx)(ht,{onClose:n,severity:"error",children:t})})}var pt=n(183),Tt=n(184),xt=n(190),gt=n(191),St=n(96),yt=function(){var t=Object(S.c)((function(t){return t.auth.isLoggedIn})),e=Object(S.b)(),n=Object(St.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required",t.password?/^[A-Z0-9._%+-]{2,}$/i.test(t.password)||(e.password="Invalid password"):e.password="Required",e},onSubmit:function(t){var c;e((c=t,function(t){t(W("loading")),t(Y(!1)),N(c).then((function(e){e.data.resultCode===d.Succeed?(t(B(!0)),t(W("succeeded")),t(Y(!0))):(t(Y(!0)),U(e.data,t))})).catch((function(e){t(Y(!0)),F(e,t)}))})),n.resetForm()}});return t?Object(at.jsx)(jt.a,{to:"/"}):Object(at.jsx)(Q.a,{container:!0,justify:"center",children:Object(at.jsx)(Q.a,{item:!0,xs:4,children:Object(at.jsx)("form",{onSubmit:n.handleSubmit,children:Object(at.jsxs)(pt.a,{children:[Object(at.jsxs)(Tt.a,{children:[Object(at.jsxs)("p",{children:["To log in get registered",Object(at.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:"here"})]}),Object(at.jsx)("p",{children:"or use common test account credentials:"}),Object(at.jsx)("p",{children:"Email: free@samuraijs.com"}),Object(at.jsx)("p",{children:"Password: free"})]}),Object(at.jsxs)(xt.a,{children:[Object(at.jsx)(nt.a,Object(v.a)({label:"Email",margin:"normal"},n.getFieldProps("email"))),n.touched.email&&n.errors.email&&Object(at.jsx)("div",{style:{color:"red"},children:n.errors.email}),Object(at.jsx)(nt.a,Object(v.a)({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched.password&&n.errors.password&&Object(at.jsx)("div",{style:{color:"red"},children:n.errors.password}),Object(at.jsx)(gt.a,{label:"Remember me",control:Object(at.jsx)(dt.a,Object(v.a)(Object(v.a)({},n.getFieldProps("rememberMe")),{},{checked:n.values.rememberMe}))}),Object(at.jsx)(m.a,{type:"submit",variant:"contained",color:"primary",children:"Login"})]})]})})})})},vt=n(58),It=n.n(vt),kt=function(){return Object(at.jsxs)("div",{className:It.a.container,children:[Object(at.jsx)("div",{className:It.a.number,children:"404"}),Object(at.jsx)("div",{className:It.a.text,children:"Page not found!"}),Object(at.jsx)("div",{className:It.a.smile,children:"\u2014\u0e05/\u1420.\u032b .\u141f\\\u0e05\u2014"})]})},Et=Object(u.a)((function(t){return Object(l.a)({root:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:{flexGrow:1}})})),_t=function(t){var e=t.demo,n=void 0!==e&&e,a=Et(),i=Object(S.c)((function(t){return t.app.status})),r=Object(S.c)((function(t){return t.app.isInitialized})),o=Object(S.c)((function(t){return t.auth.isLoggedIn})),s=Object(S.b)();Object(c.useEffect)((function(){s((function(t){t(W("loading")),K().then((function(e){e.data.resultCode===d.Succeed?(t(B(!0)),t(W("succeeded"))):U(e.data,t),t(Y(!0))})).catch((function(e){return F(e,t)}))}))}),[s]);var u=Object(c.useCallback)((function(){s((function(t){t(W("loading")),R().then((function(e){e.data.resultCode===d.Succeed?(t(B(!1)),t(W("succeeded")),t({type:"DELETE_ALL_TASKS"}),t(J([]))):U(e.data,t)})).catch((function(e){return F(e,t)}))}))}),[s]);return r?Object(at.jsxs)("div",{className:"App",children:[Object(at.jsx)(mt,{}),Object(at.jsxs)(b.a,{position:"static",children:[Object(at.jsxs)(O.a,{children:[Object(at.jsx)(f.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"menu",children:Object(at.jsx)(g.a,{})}),Object(at.jsx)(h.a,{variant:"h6",className:a.title,children:"News"}),o&&Object(at.jsx)(m.a,{color:"inherit",onClick:u,children:"Logout"})]}),"loading"===i&&Object(at.jsx)(p.a,{})]}),Object(at.jsx)(T.a,{fixed:!0,children:Object(at.jsxs)(jt.d,{children:[Object(at.jsx)(jt.b,{exact:!0,path:"/",render:function(){return Object(at.jsx)(bt,{demo:n})}}),Object(at.jsx)(jt.b,{exact:!0,path:"/login",render:function(){return Object(at.jsx)(yt,{})}}),Object(at.jsx)(jt.b,{path:"/Error404",render:function(){return Object(at.jsx)(kt,{})}}),Object(at.jsx)(jt.a,{from:"*",to:"/"})]})})]}):Object(at.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(at.jsx)(j.a,{})})},At=n(66),Ct=n(95),wt=Object(At.b)({todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TODOLISTS":return e.todolists.map((function(t){return Object(v.a)(Object(v.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"ADD_TODOLIST":return[Object(v.a)(Object(v.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(y.a)(t));case"REMOVE_TODOLIST":return Object(y.a)(t.filter((function(t){return t.id!==e.id})));case"CHANGE_TODOLIST_TITLE":return Object(y.a)(t.map((function(t){return t.id===e.id?Object(v.a)(Object(v.a)({},t),{},{title:e.title}):t})));case"CHANGE_TODOLIST_FILTER":return Object(y.a)(t.map((function(t){return t.id===e.id?Object(v.a)(Object(v.a)({},t),{},{filter:e.filter}):t})));case"SET_ENTITY_STATUS":return Object(y.a)(t.map((function(t){return t.id===e.id?Object(v.a)(Object(v.a)({},t),{},{entityStatus:e.status}):t})));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_TASKS":return Object(v.a)(Object(v.a)({},t),{},Object(G.a)({},e.todolistId,e.tasks.map((function(t){return Object(v.a)(Object(v.a)({},t),{},{entityTaskStatus:"idle"})}))));case"ADD_TASK":return Object(v.a)(Object(v.a)({},t),{},Object(G.a)({},e.task.todoListId,[Object(v.a)({},e.task)].concat(Object(y.a)(t[e.task.todoListId]))));case"REMOVE_TASK":return Object(v.a)(Object(v.a)({},t),{},Object(G.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!==e.taskId}))));case"DELETE_ALL_TASKS":return{};case"UPDATE_TASK":return Object(v.a)(Object(v.a)({},t),{},Object(G.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(v.a)(Object(v.a)({},t),e.model):t}))));case"SET_TASK_ENTITY_STATUS":return Object(v.a)(Object(v.a)({},t),{},Object(G.a)({},e.todolistId,Object(y.a)(t[e.todolistId].map((function(t){return t.id===e.taskId?Object(v.a)(Object(v.a)({},t),{},{entityTaskStatus:e.status}):t})))));case"SET_TODOLISTS":var n=Object(v.a)({},t);return e.todolists.forEach((function(t){n[t.id]=[]})),n;case"ADD_TODOLIST":return Object(v.a)(Object(v.a)({},t),{},Object(G.a)({},e.todolist.id,[]));case"REMOVE_TODOLIST":var c=Object(v.a)({},t);return delete c[e.id],c;default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(v.a)(Object(v.a)({},t),{},{status:e.status});case"APP/SET-APP-IS-INITIALIZED":return Object(v.a)(Object(v.a)({},t),{},{isInitialized:e.isInitialized});case"APP/SET-ERROR":return Object(v.a)(Object(v.a)({},t),{},{error:e.error});default:return t}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"AUTH/SET_IS_LOGGED_IN":return Object(v.a)(Object(v.a)({},t),{},{isLoggedIn:e.isLoggedIn});default:return t}}}),Lt=Object(At.c)(wt,Object(At.a)(Ct.a));window.store=Lt;var Dt=n(53);r.a.render(Object(at.jsx)(S.a,{store:Lt,children:Object(at.jsx)(Dt.a,{children:Object(at.jsx)(_t,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},58:function(t,e,n){t.exports={container:"Error404_container__iZOsP",number:"Error404_number__1XLr-",text:"Error404_text__pzOeC",smile:"Error404_smile__2Nthg"}}},[[149,1,2]]]);
//# sourceMappingURL=main.13241ae8.chunk.js.map